var _,nt={};_=function(a,b){return function(){return a.apply(b,arguments)}},nt.serialize=function(a){var b=[];if(a.constructor==Array)for(var c=0;c<a.length;c++)b.push(a[c].name+"="+encodeURIComponent(a[c].value));else for(var d in a)b.push(d+"="+encodeURIComponent(a[d]));return b.join("&")},nt.ajax=function(options){function httpSuccess(a){try{return!a.status&&location.protocol=="file:"||a.status>=200&&a.status<300||a.status==304||navigator.userAgent.indexOf("Safari")>=0&&typeof a.status=="undefined"}catch(b){}return!1}function httpData(r,type){var ct=r.getResponseHeader("content-type"),data=!type&&ct&&ct.indexOf("xml")>=0;return data=type=="xml"||data?r.responseXML:r.responseText,type=="script"&&eval.call(window,data),data}options={type:options.type||"POST",url:options.url||"",timeout:options.timeout||5e3,onSuccess:options.onSuccess||function(){},onComplete:options.onComplete||function(){},onError:options.onError||function(){},data:options.data||null};var xml=new XMLHttpRequest;xml.open(options.type,options.url,!0);var timeoutLength=options.timeout,requestDone=!1;setTimeout(function(){requestDone=!0},timeoutLength),xml.onreadystatechange=function(){xml.readyState==4&&!requestDone&&(httpSuccess(xml)?options.onSuccess(httpData(xml,options.type)):options.onError(),options.onComplete(),xml=null)},options.type==="POST"?xml.send(serialize(options.data)):xml.send(null)},nt.Models=nt.Models||{},nt.Models.url="http://localhost:8000/nt/book",nt.Models.full2abbr={"1 Corinthians":"cor1","1 John":"john1","1 Peter":"peter1","1 Thessalonians":"thess1","1 Timothy":"tim1","2 Corinthians":"cor2","2 John":"john2","2 Peter":"peter2","2 Thessalonians":"thess2","2 Timothy":"tim2","3 John":"john3",Acts:"acts",Colossians:"col",Ephesians:"eph",Galatians:"gal",Hebrews:"heb",James:"james",John:"john",Jude:"jude",Luke:"luke",Mark:"mark",Matthew:"matthew",Philemon:"phm",Phillipians:"phil",Revelation:"revelation",Romans:"romans",Titus:"titus"},nt.Models.Verse=function(a,b,c,d){this.book=nt.Models.full2abbr[a],this.chapter=b,this.verse=c,this.callback=d,this.html=""},nt.Models.Verse.prototype.get=function(){nt.ajax({type:"get",url:this.getUrl_(),data:{},timeout:5e3,onSuccess:_(function(a){a=JSON.parse(a),this.parse(a),this.callback(this.html)},this)})},nt.Models.Verse.prototype.getUrl_=function(){return nt.Models.url+"/"+this.book+"/"+this.chapter+"/"+this.verse+"/"},nt.Models.Verse.prototype.parse=function(a){var b=document.createElement("p");for(var c=0;c<a.length;c++){var d=new nt.Models.Word(a[c]);b.appendChild(d.getWidget())}this.html=b},nt.Models.Word=function(a){this.strong=a.strong,this.parse=a.parse,this.word=a.word,this.lexicon=a.lexicon},nt.Models.Word.prototype.getWidget=function(){this.span=document.createElement("span"),this.span.innerHTML=this.word+" ",this.span.onmouseover=_(function(){this.container.style.display="block"},this),this.span.onmouseout=_(function(){this.container.style.display="none"},this),this.container=document.createElement("div"),this.container.className="word";for(var a in this.parse){var b=document.createElement("p");b.innerHTML=a+": "+this.parse[a],this.container.appendChild(b)}return this.lexiconData=document.createElement("p"),this.lexiconData.innerHTML=this.lexicon,this.container.appendChild(this.lexiconData),this.span.appendChild(this.container),this.span},nt.Views=nt.Views||{},nt.Views.Reader=function(){this.el=document.getElementById("reader"),this.showVerse("John",3,16),this.text=document.getElementById("text"),this.go=document.getElementById("go"),this.go.onclick=_(function(){var a=this.text.value,b,c=a.split(" ");if(c.length===2){b=c[1].split(":"),this.showVerse(c[0],b[0],b[1]);return}if(c.length===3){b=c[2].split(":"),this.showVerse(c[0]+" "+c[1],b[0],b[1]);return}},this)},nt.Views.Reader.prototype.showVerse=function(a,b,c){var d=new nt.Models.Verse(a,b,c,_(this.renderVerse,this));d.get()},nt.Views.Reader.prototype.renderVerse=function(a){this.el.innerHTML="",this.el.appendChild(a)},nt.Views.App=function(){this.reader=new nt.Views.Reader};var app=new nt.Views.App